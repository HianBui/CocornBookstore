<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng - Coconut Corn</title>

    <!-- LINK BOOTSTRAP -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- LINK BOOTSTRAP ICON -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <!-- LINK CSS -->
    <link rel="stylesheet" href="./asset/css/style.css">
    <link rel="stylesheet" href="./asset/css/cart.css">
</head>
<body>

    <!-- HEADER -->
    <header>
        <div class="action-bar" id="action-bar">
            <div class="container">
                <!-- LOGO -->
                <a class="home" href="index.html">
                    <img src="./asset/image/Logo.svg" alt="Coconut Corn">
                </a>

                <!-- SEARCH BOX -->
                <div class="search-box">
                    <input type="text" name="search" id="search" placeholder="Nhập tên sách hoặc tác giả">
                    <button type="submit"><i class="bi bi-search"></i></button>
                </div>

                <!-- CART -->
                <div class="cart">
                    <a href="cart.html">
                        <i class="bi bi-cart"></i>
                    </a>
                    <span class="count-product">0</span>
                </div>

                <!-- LOGIN / REGISTER -->
                <div class="box-button active" id="button-logreg">
                    <a href="./login.html" class="login-button">
                        <i class="bi bi-box-arrow-right"></i> Đăng nhập
                    </a>
                    <a href="./register.html" class="register-button">
                        <i class="bi bi-person-plus-fill"></i> Đăng ký
                    </a>
                </div>

                <!-- USER DROPDOWN -->
                <div class="dropdown" id="dropdown-user" style="display: none;">
                    <button class="btn btn-secondary dropdown-toggle user-box" type="button" 
                            data-bs-toggle="dropdown">
                        <i class="bi bi-person usericonbox"></i>
                        <div class="user-name">Username</div>
                        <i class="bi bi-chevron-down usericonbox"></i>
                    </button>
                    
                    <ul class="dropdown-menu">
                        <div class="infor-user">
                            <div class="user-name-show">Username</div>
                        </div>
                        <li class="dropdown-divider-li"><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="cart.html">
                            <i class="bi bi-cart3"></i> Giỏ hàng
                        </a></li>
                        <li class="dropdown-divider-li"><hr class="dropdown-divider"></li>
                        <div class="log-out">
                            <a class="dropdown-item" href="#" data-logout>
                                <i class="bi bi-box-arrow-right"></i> Đăng xuất
                            </a>
                        </div>
                    </ul>
                </div>
            </div>
        </div>

        <!-- NAVIGATION -->
        <div class="navigation" id="nav">
            <div class="container">
                <ul>
                    <li><a href="./index.html"><i class="bi bi-house-door-fill"></i> Trang chủ</a></li>
                    <li><a href="#category"><i class="bi bi-list"></i> Danh mục</a></li>
                    <li><a href="#"><i class="bi bi-facebook"></i> Liên hệ</a></li>
                </ul>
            </div>
        </div>
    </header>

    <!-- PAGE TITLE -->
    <div class="page-title">
        <h1 class="title">Giỏ hàng của bạn</h1>
    </div>

    <!-- CART CONTENT -->
    <div class="container main-cart">
        <div class="cart-layout">
            <!-- CART ITEMS -->
            <div class="cart-table-container">
                <table class="order-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">
                                <input type="checkbox" id="selectAll" 
                                       onchange="document.querySelectorAll('.item-checkbox').forEach(cb => cb.checked = this.checked); CartHandler.updateTotal()">
                            </th>
                            <th>Thông tin sản phẩm</th>
                            <th style="width: 150px;">Số lượng</th>
                            <th style="width: 150px;">Thành tiền</th>
                            <th style="width: 70px;"></th>
                        </tr>
                    </thead>
                    <tbody id="cartTableBody">
                        <!-- Sản phẩm sẽ được load bằng JavaScript -->
                        <tr>
                            <td colspan="5" class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Đang tải...</span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="action" style="display: none;">
                    <a href="javascript:void(0)" id="clearCartBtn">
                        Xóa tất cả
                    </a>
                </div>
            </div>

            <!-- ORDER SUMMARY -->
            <div class="order-summary">
                <h5>Thông tin đơn hàng</h5>
                
                <div class="summary-row">
                    <span>Tạm tính:</span>
                    <span id="subtotal">0 đ</span>
                </div>

                <div class="summary-row">
                    <span>Phí vận chuyển:</span>
                    <span id="shipping">0 đ</span>
                </div>

                <div class="summary-row">
                    <span>Giảm giá:</span>
                    <span id="discount" style="color: var(--red-color);">-0 đ</span>
                </div>

                <div class="summary-row total">
                    <span>Tổng cộng:</span>
                    <span id="total">0 đ</span>
                </div>

                <button class="checkout-btn" onclick="checkout()">
                    <i class="bi bi-credit-card"></i> Thanh toán
                </button>

                <a href="index.html" class="continue-shopping">
                    <i class="bi bi-arrow-left"></i> Tiếp tục mua sắm
                </a>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <img class="wave" src="./asset/image/wave.svg" alt="">
    <footer>
        <div class="container">
            <div class="content">
                <div class="contact">
                    <p>Nhận hỗ trợ từ chúng tôi</p>
                    <div class="your-mail">
                        <input type="text" placeholder="Nhập email của bạn...">
                        <button type="submit"><i class="bi bi-arrow-right"></i></button>
                    </div>
                </div>

                <div class="layout-footer">
                    <a class="footer-logo" href="#">
                        <img src="./asset/image/Logo.svg" alt="!">
                        <h3>Dừa và Bắp</h3>
                    </a>

                    <ul class="info">
                        <li><p><i class="bi bi-geo-alt-fill"></i> 180 Cao Lỗ, phường 4, Quận 8</p></li>
                        <li><p><i class="bi bi-telephone-fill"></i> 0383714805</p></li>
                        <li><p><i class="bi bi-google"></i> contact@cocorn.vn</p></li>
                    </ul>
                </div>

                <div class="copyright">
                    <p>© 2025 Coconut Corn. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- SCROLL TO TOP -->
    <a href="#" id="scrollToTop"><i class="bi bi-arrow-up-square-fill"></i></a>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./asset/js/auth.js"></script>
    <script src="./asset/js/cart-handler.js"></script>

    <script>
        // Checkout function
        function checkout() {
            const rows = document.querySelectorAll('#cartTableBody tr');
            const checkedItems = Array.from(rows).filter(row => 
                row.querySelector('.item-checkbox')?.checked
            );

            if (checkedItems.length === 0) {
                alert('Vui lòng chọn ít nhất một sản phẩm để thanh toán!');
                return;
            }

            // TODO: Chuyển đến trang thanh toán
            alert('Chức năng thanh toán đang được phát triển!');
        }
    </script>
</body>
</html>